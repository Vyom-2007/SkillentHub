{% extends 'base.html' %}
{% block title %}Edit Profile - SkillentHub{% endblock %}
{% block extra_css %}
<style>
    .edit-container {
        max-width: 700px;
        margin: 0 auto;
    }

    .edit-card {
        background: var(--white);
        border-radius: 24px;
        box-shadow: var(--card-shadow);
        padding: 2.5rem;
        position: relative;
        overflow: hidden;
    }

    .edit-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: var(--bg-gradient);
    }

    .edit-header {
        text-align: center;
        margin-bottom: 2rem;
    }

    .edit-header h1 {
        font-size: 1.75rem;
        color: var(--dark);
        margin-bottom: 0.5rem;
    }

    .edit-header p {
        color: var(--gray);
    }

    .current-avatar {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .avatar-preview {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid var(--light);
        margin-bottom: 0.75rem;
    }

    .avatar-placeholder {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: var(--bg-gradient);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 0.75rem;
    }

    .avatar-placeholder i {
        font-size: 2.5rem;
        color: var(--white);
    }

    .file-input-wrapper {
        position: relative;
        display: inline-block;
    }

    .file-input-wrapper input[type="file"] {
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
        cursor: pointer;
        width: 100%;
        height: 100%;
    }

    .file-input-label {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: var(--light);
        border-radius: 8px;
        color: var(--gray);
        font-size: 0.875rem;
        cursor: pointer;
        transition: var(--transition);
    }

    .file-input-label:hover {
        background: var(--gray-light);
        color: var(--white);
    }

    .form-section {
        margin-bottom: 2rem;
    }

    .form-section-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--dark);
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--light);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .form-section-title i {
        color: var(--primary);
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
    }

    @media (max-width: 600px) {
        .form-row {
            grid-template-columns: 1fr;
        }
    }

    .btn-group {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }

    .current-file {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        color: var(--gray);
        margin-top: 0.5rem;
    }

    .current-file i {
        color: var(--success);
    }
</style>
{% endblock %}
{% block content %}
<div class="edit-container">
    <div class="edit-card">
        <div class="edit-header">
            <h1><i class="fas fa-user-edit"></i> Edit Profile</h1>
            <p>Update your profile information</p>
        </div>
        <form method="POST" action="{{ url_for('profile.edit_profile') }}" enctype="multipart/form-data" novalidate>
            {{ form.hidden_tag() }}
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-camera"></i> Profile Picture</div>
                <div class="current-avatar">
                    {% if user.profile_pic %}
                    <img src="{{ url_for('static', filename='uploads/profiles/' ~ user.profile_pic) }}"
                        class="avatar-preview" alt="Current avatar">
                    {% else %}
                    <div class="avatar-placeholder"><i class="fas fa-user"></i></div>
                    {% endif %}
                    <div class="file-input-wrapper">
                        <span class="file-input-label"><i class="fas fa-upload"></i> Choose Image</span>
                        {{ form.profile_pic(accept="image/jpeg,image/png") }}
                    </div>
                    {% if form.profile_pic.errors %}{% for error in form.profile_pic.errors %}<div class="form-error"><i
                            class="fas fa-exclamation-circle"></i> {{ error }}</div>{% endfor %}{% endif %}
                </div>
            </div>
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-info-circle"></i> Basic Information</div>
                <div class="form-group">
                    {{ form.bio.label }}
                    {{ form.bio(class="form-control", placeholder="Tell us about yourself...", rows="4") }}
                    {% if form.bio.errors %}{% for error in form.bio.errors %}<div class="form-error"><i
                            class="fas fa-exclamation-circle"></i> {{ error }}</div>{% endfor %}{% endif %}
                </div>
                <div class="form-group">
                    {{ form.education.label }}
                    {{ form.education(class="form-control", placeholder="e.g., B.Tech in Computer Science from XYZ
                    University") }}
                    {% if form.education.errors %}{% for error in form.education.errors %}<div class="form-error"><i
                            class="fas fa-exclamation-circle"></i> {{ error }}</div>{% endfor %}{% endif %}
                </div>
                <div class="form-group">
                    {{ form.skills.label }}
                    {{ form.skills(class="form-control", placeholder="e.g., Python, JavaScript, Machine Learning") }}
                    {% if form.skills.errors %}{% for error in form.skills.errors %}<div class="form-error"><i
                            class="fas fa-exclamation-circle"></i> {{ error }}</div>{% endfor %}{% endif %}
                </div>
            </div>
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-link"></i> Social Links</div>
                <div class="form-row">
                    <div class="form-group">
                        {{ form.github_link.label }}
                        {{ form.github_link(class="form-control", placeholder="https://github.com/username") }}
                        {% if form.github_link.errors %}{% for error in form.github_link.errors %}<div
                            class="form-error"><i class="fas fa-exclamation-circle"></i> {{ error }}</div>{% endfor %}{%
                        endif %}
                    </div>
                    <div class="form-group">
                        {{ form.linkedin_link.label }}
                        {{ form.linkedin_link(class="form-control", placeholder="https://linkedin.com/in/username") }}
                        {% if form.linkedin_link.errors %}{% for error in form.linkedin_link.errors %}<div
                            class="form-error"><i class="fas fa-exclamation-circle"></i> {{ error }}</div>{% endfor %}{%
                        endif %}
                    </div>
                </div>
            </div>
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-file-pdf"></i> Resume</div>
                <div class="form-group">
                    <div class="file-input-wrapper">
                        <span class="file-input-label"><i class="fas fa-upload"></i> Upload PDF Resume</span>
                        {{ form.resume(accept="application/pdf") }}
                    </div>
                    {% if user.resume_file %}<div class="current-file"><i class="fas fa-check-circle"></i> Current: {{
                        user.resume_file }}</div>{% endif %}
                    {% if form.resume.errors %}{% for error in form.resume.errors %}<div class="form-error"><i
                            class="fas fa-exclamation-circle"></i> {{ error }}</div>{% endfor %}{% endif %}
                </div>
            </div>
            <div class="btn-group">
                <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
                <a href="{{ url_for('profile.view_profile', user_id=session.get('user_id')) }}"
                    class="btn btn-secondary"><i class="fas fa-times"></i> Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}