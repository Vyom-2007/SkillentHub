{% extends 'base.html' %}
{% block title %}Post by {{ post.full_name }} - SkillentHub{% endblock %}
{% block extra_css %}
<style>
    .post-container {
        max-width: 700px;
        margin: 0 auto;
    }

    .post-card {
        background: var(--white);
        border-radius: 24px;
        box-shadow: var(--card-shadow);
        overflow: hidden;
    }

    .post-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1.5rem;
        border-bottom: 1px solid var(--light);
    }

    .post-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
    }

    .post-avatar-placeholder {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--bg-gradient);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        font-size: 1.25rem;
    }

    .post-author {
        flex: 1;
    }

    .post-author-name {
        font-weight: 600;
        color: var(--dark);
        text-decoration: none;
    }

    .post-author-name:hover {
        color: var(--primary);
    }

    .post-date {
        font-size: 0.8rem;
        color: var(--gray);
    }

    .post-actions {
        display: flex;
        gap: 0.5rem;
    }

    .post-body {
        padding: 1.5rem;
    }

    .post-content {
        color: var(--dark);
        line-height: 1.7;
        margin-bottom: 1rem;
        white-space: pre-wrap;
    }

    .post-image {
        width: 100%;
        border-radius: 12px;
        margin-bottom: 1rem;
    }

    .post-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--primary);
        text-decoration: none;
        padding: 0.5rem 1rem;
        background: var(--light);
        border-radius: 8px;
        transition: var(--transition);
    }

    .post-link:hover {
        background: var(--primary);
        color: var(--white);
    }

    .post-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid var(--light);
    }

    .btn-sm {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
    }

    .btn-danger {
        background: var(--danger);
        color: var(--white);
    }

    .btn-edit {
        background: var(--warning);
        color: var(--white);
    }
</style>
{% endblock %}
{% block content %}
<div class="post-container">
    <div class="post-card">
        <div class="post-header">
            {% if post.profile_pic %}
            <img src="{{ url_for('static', filename='uploads/profiles/' ~ post.profile_pic) }}" class="post-avatar"
                alt="{{ post.full_name }}">
            {% else %}
            <div class="post-avatar-placeholder"><i class="fas fa-user"></i></div>
            {% endif %}
            <div class="post-author">
                <a href="{{ url_for('profile.view_profile', user_id=post.user_id) }}" class="post-author-name">{{
                    post.full_name }}</a>
                <div class="post-date"><i class="far fa-clock"></i> {{ post.created_at.strftime('%B %d, %Y at %I:%M %p')
                    if post.created_at else 'Recently' }}</div>
            </div>
            {% if is_owner %}
            <div class="post-actions">
                <a href="{{ url_for('posts.edit', post_id=post.id) }}" class="btn btn-edit btn-sm"><i
                        class="fas fa-edit"></i></a>
                <form action="{{ url_for('posts.delete', post_id=post.id) }}" method="POST" style="display:inline;"
                    onsubmit="return confirm('Are you sure you want to delete this post?');">
                    <button type="submit" class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                </form>
            </div>
            {% endif %}
        </div>
        <div class="post-body">
            <p class="post-content">{{ post.content }}</p>
            {% if post.image_url %}
            <img src="{{ url_for('static', filename='uploads/posts/' ~ post.image_url) }}" class="post-image"
                alt="Post image">
            {% endif %}
            {% if post.project_link %}
            <a href="{{ post.project_link }}" target="_blank" class="post-link"><i class="fas fa-external-link-alt"></i>
                View Project</a>
            {% endif %}
        </div>
        <div class="post-footer">
            <a href="{{ url_for('profile.view_profile', user_id=post.user_id) }}" class="btn btn-secondary btn-sm"><i
                    class="fas fa-arrow-left"></i> Back to Profile</a>
        </div>
    </div>
</div>
{% endblock %}